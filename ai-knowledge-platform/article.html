<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI知识平台文章详情 - 深入学习人工智能技术">
    <meta name="keywords" content="AI文章,机器学习,深度学习,技术教程">
    <meta name="author" content="AI知识平台">
    <title>文章详情 - AI知识平台</title>

    <!-- Open Graph -->
    <meta property="og:title" content="文章详情 - AI知识平台">
    <meta property="og:description" content="深入学习人工智能技术">
    <meta property="og:type" content="article">
    <meta property="og:url" content="">
    <meta property="og:image" content="">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <!-- CSS -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/article.css">
</head>
<body class="article-page">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">AI</div>
                <span>知识平台</span>
            </a>

            <div class="navbar-nav">
                <a href="index.html" class="navbar-link">首页</a>
                <a href="articles.html" class="navbar-link active">文章</a>
                <a href="membership.html" class="navbar-link">会员</a>
                <a href="about.html" class="navbar-link">关于</a>
            </div>

            <div class="navbar-actions">
                <div class="search-box hidden-mobile">
                    <span class="search-icon">🔍</span>
                    <input type="text" class="search-input" placeholder="搜索AI知识...">
                </div>

                <a href="auth.html" class="btn btn-ghost auth-login">登录</a>
                <a href="auth.html?mode=register" class="btn btn-primary hidden-mobile auth-register">注册</a>
                <a href="user.html" class="btn btn-ghost hidden auth-user">
                    <span class="user-name"></span>
                </a>
                <a href="admin.html" class="btn btn-secondary hidden auth-admin">管理</a>

                <button class="navbar-toggle">
                    <span>☰</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- 文章头部 -->
    <header class="article-header">
        <div class="article-header-container">
            <!-- 面包屑导航和文章信息将通过JavaScript动态生成 -->
        </div>
    </header>

    <!-- 文章内容 -->
    <main class="article-content">
        <div class="article-container">
            <!-- 主要内容 -->
            <div class="article-main">
                <!-- 文章内容将通过JavaScript动态生成 -->
            </div>

            <!-- 侧边栏 -->
            <aside class="article-sidebar">
                <!-- 侧边栏内容将通过JavaScript动态生成 -->
            </aside>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>AI知识平台</h3>
                <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: var(--spacing-lg);">
                    专注于人工智能技术学习和交流的平台，为AI爱好者提供优质的学习资源和专业指导。
                </p>
                <div class="footer-social">
                    <a href="#" aria-label="微信">📱</a>
                    <a href="#" aria-label="微博">🌐</a>
                    <a href="#" aria-label="GitHub">💻</a>
                    <a href="#" aria-label="邮箱">📧</a>
                </div>
            </div>

            <div class="footer-section">
                <h3>学习资源</h3>
                <ul class="footer-links">
                    <li><a href="articles.html">最新文章</a></li>
                    <li><a href="articles.html?category=入门">入门教程</a></li>
                    <li><a href="articles.html?category=进阶">进阶课程</a></li>
                    <li><a href="articles.html?category=实战">实战项目</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>社区</h3>
                <ul class="footer-links">
                    <li><a href="#">讨论区</a></li>
                    <li><a href="#">问答社区</a></li>
                    <li><a href="#">专家专栏</a></li>
                    <li><a href="#">线下活动</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>关于我们</h3>
                <ul class="footer-links">
                    <li><a href="about.html">平台介绍</a></li>
                    <li><a href="#">联系我们</a></li>
                    <li><a href="#">加入我们</a></li>
                    <li><a href="#">合作伙伴</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <div>
                <p>&copy; 2024 AI知识平台. 保留所有权利.</p>
            </div>
            <div>
                <a href="#" style="color: var(--text-tertiary); margin-right: var(--spacing-md);">隐私政策</a>
                <a href="#" style="color: var(--text-tertiary); margin-right: var(--spacing-md);">服务条款</a>
                <a href="#" style="color: var(--text-tertiary);">Cookie设置</a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/common.js"></script>
    <script src="js/article.js"></script>

    <!-- 页面特定的初始化 -->
    <script>
        // 等待DOM加载完成
        document.addEventListener('DOMContentLoaded', function() {
            // 文章详情页初始化
            if (typeof ArticlePageInit === 'function') {
                ArticlePageInit();
            }

            // 绑定全局搜索功能
            const globalSearch = document.querySelector('.navbar .search-input');
            if (globalSearch) {
                globalSearch.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const query = this.value.trim();
                        if (query) {
                            window.location.href = `articles.html?search=${encodeURIComponent(query)}`;
                        }
                    }
                });
            }

            // 键盘快捷键
            document.addEventListener('keydown', function(e) {
                // 左箭头键 - 上一篇文章
                if (e.key === 'ArrowLeft' && !e.target.matches('input, textarea')) {
                    // 实现上一篇文章导航
                    console.log('上一篇文章');
                }

                // 右箭头键 - 下一篇文章
                if (e.key === 'ArrowRight' && !e.target.matches('input, textarea')) {
                    // 实现下一篇文章导航
                    console.log('下一篇文章');
                }

                // ESC键 - 关闭模态框
                if (e.key === 'Escape') {
                    // 关闭图片模态框等
                    const modals = document.querySelectorAll('[style*="position: fixed"]');
                    modals.forEach(modal => {
                        if (modal.parentNode && modal.style.zIndex === '10000') {
                            modal.parentNode.removeChild(modal);
                        }
                    });
                }
            });

            // 打印功能
            function printArticle() {
                window.print();
            }

            // 添加打印按钮（如果需要）
            // const printBtn = document.createElement('button');
            // printBtn.className = 'btn btn-outline';
            // printBtn.textContent = '🖨️ 打印';
            // printBtn.onclick = printArticle;
            // document.querySelector('.article-actions .action-buttons').appendChild(printBtn);
        });

        // 错误处理
        window.addEventListener('error', function(e) {
            console.error('文章页面错误:', e.error);
            ToastManager.error('页面加载出现错误，请刷新重试');
        });

        // 页面性能监控
        window.addEventListener('load', function() {
            // 监控文章加载性能
            const perfData = performance.getEntriesByType('navigation')[0];
            const loadTime = perfData.loadEventEnd - perfData.navigationStart;

            if (loadTime > 3000) {
                console.warn('文章页面加载时间较长:', loadTime + 'ms');
            }
        });

        // 监听页面可见性变化
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // 页面隐藏时暂停视频等
                const videos = document.querySelectorAll('video');
                videos.forEach(video => {
                    if (!video.paused) {
                        video.pause();
                    }
                });
            }
        });
    </script>
</body>
</html>